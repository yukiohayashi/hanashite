
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥å•é¡Œã®æœªè§£æ±ºåŽŸå› ã¨æ®µéšŽçš„æ”¹å–„æ¡ˆ

## 1. ã¯ã˜ã‚ã«

å…ˆæ—¥ã®ã”å ±å‘Šã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥å•é¡ŒãŒä¾ç„¶ã¨ã—ã¦è§£æ±ºã•ã‚Œã¦ã„ãªã„ã¨ã®ã“ã¨ã€èª ã«ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚ã”æä¾›ã„ãŸã ã„ãŸãƒ­ã‚°ã®å…¨å†…å®¹ã‚’å†åº¦ã€ã‚ˆã‚Šæ·±ãåˆ†æžã—ã€è€ƒãˆã‚‰ã‚Œã‚‹æ®‹å­˜åŽŸå› ã®ç‰¹å®šã¨ã€å•é¡Œã‚’å®Œå…¨ã«è§£æ±ºã™ã‚‹ãŸã‚ã®å…·ä½“çš„ãªæ”¹å–„æ¡ˆã‚’æ®µéšŽçš„ã«ã”ææ¡ˆã—ã¾ã™ã€‚

å‰å›žã®èª¿æŸ»ã§ã€PM2ã®èµ·å‹•ã‚³ãƒžãƒ³ãƒ‰ãŒNext.jsã®`standalone`ãƒ¢ãƒ¼ãƒ‰ã«å¯¾å¿œã—ã¦ã„ãªã„ã¨ã„ã†æ ¹æœ¬åŽŸå› ãŒç‰¹å®šã•ã‚Œã€ä¿®æ­£ãŒé©ç”¨ã•ã‚Œã¾ã—ãŸã€‚ã—ã‹ã—ã€å•é¡ŒãŒç¶™ç¶šã—ã¦ã„ã‚‹ã“ã¨ã‹ã‚‰ã€åŽŸå› ã¯å˜ä¸€ã§ã¯ãªãã€è¤‡æ•°ã®è¦å› ãŒçµ¡ã¿åˆã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã¨åˆ¤æ–­ã•ã‚Œã¾ã™ã€‚

ã“ã®å ±å‘Šæ›¸ã§ã¯ã€è€ƒãˆã‚‰ã‚Œã‚‹åŽŸå› ã‚’ã€Œãƒ–ãƒ©ã‚¦ã‚¶å±¤ã€ã€ŒWebã‚µãƒ¼ãƒãƒ¼å±¤(nginx)ã€ã€Œã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤(Next.js/PM2)ã€ã®3ã¤ã«åˆ†é¡žã—ã€ãã‚Œãžã‚Œã®å±¤ã§ç¢ºèªã™ã¹ãé …ç›®ã¨å…·ä½“çš„ãªå¯¾å‡¦æ³•ã‚’ã‚³ãƒžãƒ³ãƒ‰ä»˜ãã§è§£èª¬ã—ã¾ã™ã€‚

## 2. è€ƒãˆã‚‰ã‚Œã‚‹æ®‹å­˜åŽŸå› ã®å±¤åˆ¥åˆ†æž

ãƒ­ã‚°ã‚’å†åˆ†æžã—ãŸçµæžœã€PM2ã®èµ·å‹•ã‚³ãƒžãƒ³ãƒ‰ä¿®æ­£å¾Œã‚‚å•é¡ŒãŒç¶™ç¶šã—ã¦ã„ã‚‹åŽŸå› ã¨ã—ã¦ã€ä»¥ä¸‹ã®3ã¤ã®å±¤ã«ãŠã‘ã‚‹è¨­å®šãŒç›¸äº’ã«å½±éŸ¿ã—ã‚ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

| å±¤ | è€ƒãˆã‚‰ã‚Œã‚‹åŽŸå›  | ãƒ­ã‚°ã‹ã‚‰èª­ã¿å–ã‚Œã‚‹æ ¹æ‹  |
| :--- | :--- | :--- |
| **ãƒ–ãƒ©ã‚¦ã‚¶å±¤** | **å¼·åŠ›ãªé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: ä¸€åº¦èª­ã¿è¾¼ã¾ã‚ŒãŸJavaScriptã®ãƒãƒ£ãƒ³ã‚¯ãƒ•ã‚¡ã‚¤ãƒ«(`_next/static/chunks/...js`)ãŒã€ãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚ˆã£ã¦é•·æœŸé–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ã„ã‚‹ã€‚ | ãƒ­ã‚°å¾ŒåŠã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§å¤ã„JSãƒ•ã‚¡ã‚¤ãƒ«(`7932189dceae22ab.js`ãªã©)ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æç¤ºã—ã¦ã„ã‚‹ã€‚`generateBuildId`ã«ã‚ˆã‚‹ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚‚è©¦ã¿ã‚‰ã‚Œã¦ã„ã‚‹ãŒã€ãã‚Œã§ã‚‚è§£æ¶ˆã•ã‚Œã¦ã„ãªã„ã€‚ |
| **Webã‚µãƒ¼ãƒãƒ¼å±¤ (nginx)** | **é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ«ãƒ¼ãƒ«ã®æ®‹å­˜**: nginxã®è¨­å®šã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æœ¬ä½“(`location /`)ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ãªã„è¨­å®šã«ãªã£ã¦ã„ã‚‹ãŒã€é™çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡ç”¨ã®ãƒ‘ã‚¹(`/_next/static/`)ã«å¯¾ã—ã¦ã€åˆ¥é€”å¼·åŠ›ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ«ãƒ¼ãƒ«ãŒé©ç”¨ã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚ | ãƒ­ã‚°ä¸­ç›¤ã§`nginx/hanashite.jp.conf`ã«`/_next/static`ã¸ã®1æ™‚é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®šãŒã‚ã‚‹ã“ã¨ãŒè¨€åŠã•ã‚Œã¦ã„ã‚‹ã€‚æœ€çµ‚çš„ã«`location /`ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¯ç„¡åŠ¹åŒ–ã•ã‚ŒãŸãŒã€`/_next/static`ã¸ã®å€‹åˆ¥è¨­å®šãŒæ®‹ã£ã¦ã„ã‚‹ã€ã‚ã‚‹ã„ã¯åˆ¥ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚ |
| **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ (Next.js/PM2)** | **`standalone`ãƒ¢ãƒ¼ãƒ‰ã®ãƒ‡ãƒ—ãƒ­ã‚¤ä¸å‚™**: `output: 'standalone'`ãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€ãƒ“ãƒ«ãƒ‰æ™‚ã«ç”Ÿæˆã•ã‚Œã‚‹`standalone`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«ã€å®Ÿè¡Œã«å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ç¾¤(`.next/static`ã‚„`public`ãƒ•ã‚©ãƒ«ãƒ€ãªã©)ã‚’åˆ¥é€”ã‚³ãƒ”ãƒ¼ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ã“ã®ã‚³ãƒ”ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹ãŒä¸å®Œå…¨ã§ã‚ã‚‹ã‹ã€ã‚ã‚‹ã„ã¯ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«å¤ã„ãƒ•ã‚¡ã‚¤ãƒ«ãŒå®Œå…¨ã«å‰Šé™¤ã•ã‚Œã¦ã„ãªã„ã€‚ | ãƒ­ã‚°å†…ã§`rsync`ã‚³ãƒžãƒ³ãƒ‰ã‚’ä½¿ã£ã¦`standalone`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚„`.next/static`ã€`public`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è»¢é€ã—ã¦ã„ã‚‹ç®‡æ‰€ãŒè¤‡æ•°å›žç™»å ´ã™ã‚‹ãŒã€è»¢é€å…ˆã‚„é †åºã«æ··ä¹±ãŒè¦‹ã‚‰ã‚Œã‚‹ã€‚PM2ã®èµ·å‹•ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒé–“é•ã£ã¦ã„ãŸã‚¨ãƒ©ãƒ¼(`Cannot find module '/home/ubuntu/hanashite/server.js'`)ã‚‚ç™ºç”Ÿã—ã¦ãŠã‚Šã€ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ—ãƒ­ã‚»ã‚¹å…¨ä½“ãŒä¸å®‰å®šã ã£ãŸã“ã¨ãŒä¼ºãˆã‚‹ã€‚ |

## 3. æ®µéšŽçš„ãªæ”¹å–„æ¡ˆ

å•é¡Œã‚’ç¢ºå®Ÿã«åˆ‡ã‚Šåˆ†ã‘ã€è§£æ±ºã«å°ŽããŸã‚ã€ä»¥ä¸‹ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’ä¸Šã‹ã‚‰é †ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚’å¼·ãæŽ¨å¥¨ã—ã¾ã™ã€‚å‰ã®ã‚¹ãƒ†ãƒƒãƒ—ã§å•é¡ŒãŒè§£æ±ºã—ãŸå ´åˆã§ã‚‚ã€å®‰å®šã—ãŸé‹ç”¨ã®ãŸã‚ã€æœ€å¾Œã¾ã§å®Ÿæ–½ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—1: ã€Webã‚µãƒ¼ãƒãƒ¼å±¤ã€‘nginxã«ãŠã‘ã‚‹ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å®Œå…¨ç„¡åŠ¹åŒ–

ã¾ãšã€å•é¡Œã®åˆ‡ã‚Šåˆ†ã‘ã¨ã—ã¦æœ€ã‚‚é‡è¦ãªã€ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·(nginx)å±¤ã§ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å®Œå…¨ã«ç„¡åŠ¹åŒ–ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€Next.jsã‚„ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã«é–¢ã‚ã‚‰ãšã€å¸¸ã«æœ€æ–°ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒé…ä¿¡ã•ã‚Œã‚‹çŠ¶æ…‹ã‚’å¼·åˆ¶çš„ã«ä½œã‚Šã¾ã™ã€‚

**ç›®çš„:** nginxãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’è¿”ã—ã¦ã„ã‚‹å¯èƒ½æ€§ã‚’å®Œå…¨ã«æŽ’é™¤ã™ã‚‹ã€‚

**æ‰‹é †:**

1.  **nginxè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—:**

    ```shell
    ssh -i ~/.ssh/hanashite.key ubuntu@133.18.125.19 "sudo cp /etc/nginx/sites-available/dokujo.com /etc/nginx/sites-available/dokujo.com.bak"
    ```

2.  **nginxè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸Šæ›¸ã:**
    ä»¥ä¸‹ã®ã‚³ãƒžãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å®Œå…¨ã«ç„¡åŠ¹åŒ–ã™ã‚‹è¨­å®šã§`/etc/nginx/sites-available/dokujo.com`ã‚’ä¸Šæ›¸ãã—ã¾ã™ã€‚`location /_next/static`ã®ã‚ˆã†ãªç‰¹å®šã®ãƒ‘ã‚¹ã¸ã®ãƒ«ãƒ¼ãƒ«ã‚‚ä¸€æ—¦å‰Šé™¤ã—ã€ã™ã¹ã¦ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’Next.jsã«æµã™ã‚·ãƒ³ãƒ—ãƒ«ãªè¨­å®šã«ã—ã¾ã™ã€‚

    ```shell
    ssh -i ~/.ssh/hanashite.key ubuntu@133.18.125.19 "sudo tee /etc/nginx/sites-available/dokujo.com > /dev/null << 'EOF'
    server {
        server_name dokujo.com www.dokujo.com;

        location / {
            proxy_pass http://localhost:3000;
            proxy_http_version 1.1;
            proxy_set_header Upgrade \$http_upgrade;
            proxy_set_header Connection 'upgrade';
            proxy_set_header Host \$host;
            proxy_cache_bypass \$http_upgrade;

            # --- å¼·åŠ›ãªã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡åŠ¹åŒ–è¨­å®š ---
            proxy_no_cache 1;
            proxy_cache_bypass 1;
            add_header Cache-Control 'no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0';
            add_header Pragma 'no-cache';
            add_header Expires '0';
            # --- ã“ã“ã¾ã§ ---
        }

        listen 443 ssl; # managed by Certbot
        ssl_certificate /etc/letsencrypt/live/dokujo.com/fullchain.pem; # managed by Certbot
        ssl_certificate_key /etc/letsencrypt/live/dokujo.com/privkey.pem; # managed by Certbot
        include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
        ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot
    }

    server {
        if (\$host = www.dokujo.com) {
            return 301 https://\$host\$request_uri;
        } # managed by Certbot

        if (\$host = dokujo.com) {
            return 301 https://\$host\$request_uri;
        } # managed by Certbot

        listen 80;
        server_name dokujo.com www.dokujo.com;
        return 404; # managed by Certbot
    }
    EOF"
    ```

3.  **nginxè¨­å®šã®ãƒ†ã‚¹ãƒˆã¨å†èª­ã¿è¾¼ã¿:**

    ```shell
    ssh -i ~/.ssh/hanashite.key ubuntu@133.18.125.19 "sudo nginx -t && sudo systemctl reload nginx"
    ```

    ã“ã®ã‚³ãƒžãƒ³ãƒ‰ã§`test is successful`ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸã§ã™ã€‚

### ã‚¹ãƒ†ãƒƒãƒ—2: ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã€‘ã‚¯ãƒªãƒ¼ãƒ³ãªå†ãƒ‡ãƒ—ãƒ­ã‚¤

ã‚µãƒ¼ãƒãƒ¼ä¸Šã®å¤ã„ãƒ“ãƒ«ãƒ‰æˆæžœç‰©ãŒæ®‹ã£ã¦ã„ã‚‹å¯èƒ½æ€§ã‚’æŽ’é™¤ã™ã‚‹ãŸã‚ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Œå…¨ã«ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã‹ã‚‰å†ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚

**ç›®çš„:** å¤ã„ãƒ“ãƒ«ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å®Œå…¨ã«å‰Šé™¤ã—ã€æœ€æ–°ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¡Œã†ã€‚

**æ‰‹é †:**

ä»¥ä¸‹ã®ã‚³ãƒžãƒ³ãƒ‰ã‚’**ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ**ã§å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚ã‚µãƒ¼ãƒãƒ¼ä¸Šã®å¤ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã€æœ€æ–°ã®ãƒ“ãƒ«ãƒ‰ã‚’è»¢é€ã€PM2ã‚’å†èµ·å‹•ã™ã‚‹ã¾ã§ã‚’è‡ªå‹•ã§è¡Œã„ã¾ã™ã€‚

```shell
#!/bin/bash

# ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã‚‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’åœæ­¢
set -e

# VPSæŽ¥ç¶šæƒ…å ±
VPS_USER="ubuntu"
VPS_HOST="133.18.125.19"
SSH_KEY="~/.ssh/hanashite.key"
PROJECT_DIR="/home/ubuntu/hanashite"

# SSHæŽ¥ç¶šã‚³ãƒžãƒ³ãƒ‰ã‚¨ã‚¤ãƒªã‚¢ã‚¹
SSH_CMD="ssh -i ${SSH_KEY} ${VPS_USER}@${VPS_HOST}"

echo "ðŸš€ ã‚¯ãƒªãƒ¼ãƒ³ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’é–‹å§‹ã—ã¾ã™..."

# 1. ã‚µãƒ¼ãƒãƒ¼ä¸Šã®PM2ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢ãƒ»å‰Šé™¤
echo "ðŸ“¦ ã‚µãƒ¼ãƒãƒ¼ä¸Šã®PM2ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢ãƒ»å‰Šé™¤ã—ã¦ã„ã¾ã™..."
${SSH_CMD} "pm2 delete hanashite || true"

# 2. ã‚µãƒ¼ãƒãƒ¼ä¸Šã®å¤ã„ãƒ“ãƒ«ãƒ‰æˆæžœç‰©ã‚’å®Œå…¨ã«å‰Šé™¤
echo "ðŸ—‘ï¸ ã‚µãƒ¼ãƒãƒ¼ä¸Šã®å¤ã„ãƒ“ãƒ«ãƒ‰æˆæžœç‰©ã‚’å‰Šé™¤ã—ã¦ã„ã¾ã™..."
${SSH_CMD} "rm -rf ${PROJECT_DIR}/.next ${PROJECT_DIR}/public ${PROJECT_DIR}/node_modules ${PROJECT_DIR}/server.js"

# 3. ãƒ­ãƒ¼ã‚«ãƒ«ã§æœ€æ–°ã®ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã€ãƒ“ãƒ«ãƒ‰
echo "ðŸ“¥ ãƒ­ãƒ¼ã‚«ãƒ«ã§æœ€æ–°ã®ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã€ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™..."
git pull origin main
npm install
npm run build

# 4. ãƒ“ãƒ«ãƒ‰æˆæžœç‰©ã‚’ã‚µãƒ¼ãƒãƒ¼ã«è»¢é€
echo "ðŸ“¤ ãƒ“ãƒ«ãƒ‰æˆæžœç‰©ã‚’ã‚µãƒ¼ãƒãƒ¼ã«è»¢é€ã—ã¦ã„ã¾ã™..."
rsync -avz --delete ./.next/standalone/ "${VPS_USER}@${VPS_HOST}:${PROJECT_DIR}/"
rsync -avz --delete ./.next/static/ "${VPS_USER}@${VPS_HOST}:${PROJECT_DIR}/.next/static/"
rsync -avz --delete ./public/ "${VPS_USER}@${VPS_HOST}:${PROJECT_DIR}/public/"

# 5. ã‚µãƒ¼ãƒãƒ¼ä¸Šã§PM2ã‚’å†èµ·å‹•
echo "ðŸ”„ ã‚µãƒ¼ãƒãƒ¼ä¸Šã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†èµ·å‹•ã—ã¾ã™..."
${SSH_CMD} "cd ${PROJECT_DIR} && pm2 start server.js --name hanashite"

# 6. PM2ã®ãƒ—ãƒ­ã‚»ã‚¹ãƒªã‚¹ãƒˆã‚’ä¿å­˜
${SSH_CMD} "pm2 save"

echo "ðŸŽ‰ ã‚¯ãƒªãƒ¼ãƒ³ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå®Œäº†ã—ã¾ã—ãŸï¼"
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ã€ãƒ–ãƒ©ã‚¦ã‚¶å±¤ã€‘ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å®Œå…¨ã‚¯ãƒªã‚¢ã¨ç¢ºèª

ã‚µãƒ¼ãƒãƒ¼å´ã®æº–å‚™ãŒæ•´ã£ãŸå¾Œã€æœ€å¾Œã«ãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæ®‹ã£ã¦ã„ãªã„ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚

**ç›®çš„:** ãƒ–ãƒ©ã‚¦ã‚¶ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒåŽŸå› ã§ãªã„ã“ã¨ã‚’æœ€çµ‚ç¢ºèªã™ã‚‹ã€‚

**æ‰‹é †:**

1.  **ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰ã§ã®ç¢ºèª(æœ€å„ªå…ˆ):**
    *   æ–°ã—ã„ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼ˆãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ–ãƒ©ã‚¦ã‚¸ãƒ³ã‚°ï¼‰ã‚’é–‹ãã€ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚ã“ã‚ŒãŒæœ€ã‚‚ç°¡å˜ã§ç¢ºå®Ÿãªç¢ºèªæ–¹æ³•ã§ã™ã€‚

2.  **é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ãŸã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢:**
    *   ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰ã§ã‚‚å•é¡ŒãŒè§£æ±ºã—ãªã„å ´åˆã€ä»¥ä¸‹ã®æ‰‹é †ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å®Œå…¨ã«å‰Šé™¤ã—ã¾ã™ã€‚
        1.  ã‚µã‚¤ãƒˆã‚’é–‹ã„ãŸçŠ¶æ…‹ã§ `F12` ã‚­ãƒ¼ã‚’æŠ¼ã—ã€é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ãã¾ã™ã€‚
        2.  `Application` (ã‚‚ã—ãã¯ `ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸`) ã‚¿ãƒ–ã‚’é¸æŠžã—ã¾ã™ã€‚
        3.  å·¦å´ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ `Storage` (ã‚‚ã—ãã¯ `ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸`) ã‚’é¸æŠžã—ã¾ã™ã€‚
        4.  `Clear site data` (ã‚‚ã—ãã¯ `ã‚µã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æ¶ˆåŽ»`) ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚ã™ã¹ã¦ã®é …ç›®ã«ãƒã‚§ãƒƒã‚¯ãŒå…¥ã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
        5.  ãƒšãƒ¼ã‚¸ã‚’ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ (Windows: `Ctrl + Shift + R`, Mac: `Cmd + Shift + R`)ã€‚

## 4. çµè«–

ä¸Šè¨˜ã®æ‰‹é †ã‚’ã‚¹ãƒ†ãƒƒãƒ—1ã‹ã‚‰é †ã«å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥å•é¡Œã®åŽŸå› ã‚’å±¤ã”ã¨ã«ç‰¹å®šã—ã€è§£æ±ºã§ãã‚‹å¯èƒ½æ€§ãŒéžå¸¸ã«é«˜ã„ã§ã™ã€‚ç‰¹ã«ã€**ã‚¹ãƒ†ãƒƒãƒ—1ã®nginxè¨­å®šã®è¦‹ç›´ã—**ã¨**ã‚¹ãƒ†ãƒƒãƒ—2ã®ã‚¯ãƒªãƒ¼ãƒ³ãªå†ãƒ‡ãƒ—ãƒ­ã‚¤**ãŒå•é¡Œè§£æ±ºã®éµã¨ãªã‚Šã¾ã™ã€‚

ãŠæ‰‹æ•°ã‚’ãŠã‹ã‘ã—ã¾ã™ãŒã€ã”ç¢ºèªã®ã»ã©ã€ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚
